{
  "version": 3,
  "sources": ["../../../../../../../../libs/file-system-connector/src/lib/handler/dummy.filehandler.ts"],
  "sourcesContent": ["import { Logger } from '@transai/logger';\n\nimport {\n  ActiveFileHandlerInterface,\n  FileHandlerConfig,\n  FileHandlerInterface,\n} from '../file-handler.interface';\nimport { GenericActiveFileActiveFileHandler } from '../generic-active-file.active-file-handler';\nimport { FileInfo, FileInfoEnum } from '../types';\n\nexport interface DummyConfig extends FileHandlerConfig {\n  type: 'dummy';\n  dummyFiles: Array<string>;\n}\n\nexport class DummyFilehandler implements FileHandlerInterface {\n  readonly #dummyConfig: DummyConfig;\n\n  constructor(dummyConfig: DummyConfig) {\n    this.#dummyConfig = dummyConfig;\n  }\n\n  static fromDsn(dsn: string): DummyFilehandler | null {\n    if (!dsn.startsWith('dummy:')) {\n      return null;\n    }\n\n    const dummyFiles = dsn.substring(0, dsn.indexOf('dummy:'));\n\n    return new DummyFilehandler({\n      type: 'dummy',\n      dummyFiles: dummyFiles.split(','),\n      processedAction: 'move',\n    });\n  }\n\n  async list(): Promise<Array<FileInfo>> {\n    return (this.#dummyConfig.dummyFiles ?? []).map((file) => {\n      return {\n        name: file,\n        size: 0,\n        modifyTime: new Date(),\n        type: FileInfoEnum.FILE,\n      };\n    });\n  }\n\n  async readFile(): Promise<ActiveFileHandlerInterface> {\n    const randomData = Math.random().toString(36).substring(7);\n    const buffer = Buffer.from(randomData);\n    return new GenericActiveFileActiveFileHandler(buffer);\n  }\n\n  async writeFile(\n    data: ActiveFileHandlerInterface,\n    remotePath: string,\n    filename: string,\n  ): Promise<boolean> {\n    Logger.getInstance().debug(\n      `Dummy write file to ${remotePath} / ${filename}`,\n    );\n    return true;\n  }\n\n  async deleteFile(filepath: string): Promise<boolean> {\n    Logger.getInstance().debug(`Dummy delete file from ${filepath}`);\n    return true;\n  }\n\n  async fileExists(): Promise<boolean> {\n    return true;\n  }\n\n  pathAsDsn(filepath: string): string {\n    return `dummy:${filepath}`;\n  }\n\n  async init(): Promise<void> {\n    /* empty */\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuB;AAOvB,iCAAmD;AACnD,mBAAuC;AAOhC,MAAM,iBAAiD;AAAA,EACnD;AAAA,EAET,YAAY,aAA0B;AACpC,SAAK,eAAe;AAAA,EACtB;AAAA,EAEA,OAAO,QAAQ,KAAsC;AACnD,QAAI,CAAC,IAAI,WAAW,QAAQ,GAAG;AAC7B,aAAO;AAAA,IACT;AAEA,UAAM,aAAa,IAAI,UAAU,GAAG,IAAI,QAAQ,QAAQ,CAAC;AAEzD,WAAO,IAAI,iBAAiB;AAAA,MAC1B,MAAM;AAAA,MACN,YAAY,WAAW,MAAM,GAAG;AAAA,MAChC,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,OAAiC;AACrC,YAAQ,KAAK,aAAa,cAAc,CAAC,GAAG,IAAI,CAAC,SAAS;AACxD,aAAO;AAAA,QACL,MAAM;AAAA,QACN,MAAM;AAAA,QACN,YAAY,oBAAI,KAAK;AAAA,QACrB,MAAM,0BAAa;AAAA,MACrB;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,WAAgD;AACpD,UAAM,aAAa,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,CAAC;AACzD,UAAM,SAAS,OAAO,KAAK,UAAU;AACrC,WAAO,IAAI,8DAAmC,MAAM;AAAA,EACtD;AAAA,EAEA,MAAM,UACJ,MACA,YACA,UACkB;AAClB,yBAAO,YAAY,EAAE;AAAA,MACnB,uBAAuB,UAAU,MAAM,QAAQ;AAAA,IACjD;AACA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,WAAW,UAAoC;AACnD,yBAAO,YAAY,EAAE,MAAM,0BAA0B,QAAQ,EAAE;AAC/D,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,aAA+B;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,UAA0B;AAClC,WAAO,SAAS,QAAQ;AAAA,EAC1B;AAAA,EAEA,MAAM,OAAsB;AAAA,EAE5B;AACF;",
  "names": []
}
