{
  "version": 3,
  "sources": ["../../../../../../../libs/sftp-client/src/lib/connect-sftp-client.ts"],
  "sourcesContent": ["import { FileInfo } from 'ssh2-sftp-client';\nimport { Logger } from '@transai/logger';\nimport { SftpClient } from './sftp-client';\nimport { SftpInterface } from './sftp-interface';\n\nexport class ConnectSftpClient extends SftpClient implements SftpInterface {\n  public override async init(): Promise<void> {\n    await super.init();\n    await this.sftpClient.end();\n    Logger.getInstance().info('SFTP client initialized');\n  }\n\n  public override async writeFile(\n    destination: string,\n    content: string,\n  ): Promise<string> {\n    await this.sftpClient.connect(this.config);\n    const res = await super.writeFile(destination, content);\n    await this.sftpClient.end();\n    return res;\n  }\n\n  public override async readFile(destination: string): Promise<Buffer> {\n    await this.sftpClient.connect(this.config);\n    const res = await super.readFile(destination);\n    await this.sftpClient.end();\n    return res;\n  }\n\n  public override async moveFile(\n    path: string,\n    file: FileInfo,\n    destination: string,\n  ): Promise<void> {\n    await this.sftpClient.connect(this.config);\n    await super.moveFile(path, file, destination);\n    await this.sftpClient.end();\n  }\n\n  public override async deleteFile(path: string): Promise<void> {\n    await this.sftpClient.connect(this.config);\n    await super.deleteFile(path);\n    await this.sftpClient.end();\n  }\n\n  public override async list(destination: string): Promise<Array<FileInfo>> {\n    await this.sftpClient.connect(this.config);\n    const res = await this.sftpClient.list(destination);\n    await this.sftpClient.end();\n    return res;\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAuB;AACvB,yBAA2B;AAGpB,MAAM,0BAA0B,8BAAoC;AAAA,EACzE,MAAsB,OAAsB;AAC1C,UAAM,MAAM,KAAK;AACjB,UAAM,KAAK,WAAW,IAAI;AAC1B,yBAAO,YAAY,EAAE,KAAK,yBAAyB;AAAA,EACrD;AAAA,EAEA,MAAsB,UACpB,aACA,SACiB;AACjB,UAAM,KAAK,WAAW,QAAQ,KAAK,MAAM;AACzC,UAAM,MAAM,MAAM,MAAM,UAAU,aAAa,OAAO;AACtD,UAAM,KAAK,WAAW,IAAI;AAC1B,WAAO;AAAA,EACT;AAAA,EAEA,MAAsB,SAAS,aAAsC;AACnE,UAAM,KAAK,WAAW,QAAQ,KAAK,MAAM;AACzC,UAAM,MAAM,MAAM,MAAM,SAAS,WAAW;AAC5C,UAAM,KAAK,WAAW,IAAI;AAC1B,WAAO;AAAA,EACT;AAAA,EAEA,MAAsB,SACpB,MACA,MACA,aACe;AACf,UAAM,KAAK,WAAW,QAAQ,KAAK,MAAM;AACzC,UAAM,MAAM,SAAS,MAAM,MAAM,WAAW;AAC5C,UAAM,KAAK,WAAW,IAAI;AAAA,EAC5B;AAAA,EAEA,MAAsB,WAAW,MAA6B;AAC5D,UAAM,KAAK,WAAW,QAAQ,KAAK,MAAM;AACzC,UAAM,MAAM,WAAW,IAAI;AAC3B,UAAM,KAAK,WAAW,IAAI;AAAA,EAC5B;AAAA,EAEA,MAAsB,KAAK,aAA+C;AACxE,UAAM,KAAK,WAAW,QAAQ,KAAK,MAAM;AACzC,UAAM,MAAM,MAAM,KAAK,WAAW,KAAK,WAAW;AAClD,UAAM,KAAK,WAAW,IAAI;AAC1B,WAAO;AAAA,EACT;AACF;",
  "names": []
}
