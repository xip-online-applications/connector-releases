{
  "version": 3,
  "sources": ["../../../../../../../libs/helper-functions/src/lib/validators.ts"],
  "sourcesContent": ["import {\n  KafkaCallbackResponse,\n  XodBaseMessageType,\n} from '@xip-online-data/types';\nimport { BadRequest } from '@xip-online-data/kafka-base-service';\nimport { Logger } from '@transai/logger';\n\nconst isValid = (message: XodBaseMessageType): boolean => {\n  const now = new Date();\n  const upperBound = new Date(message.ttl);\n  return now < upperBound;\n};\n\nexport const expirationValidatorInLine = (\n  validateForAction: boolean,\n  callbackFunction: (\n    message: XodBaseMessageType,\n  ) => Promise<KafkaCallbackResponse>,\n): ((message: XodBaseMessageType) => Promise<KafkaCallbackResponse>) => {\n  return async (message: XodBaseMessageType) => {\n    if (!validateForAction && message.type === 'ACTION') {\n      return callbackFunction(message);\n    }\n    if (isValid(message)) {\n      return callbackFunction(message);\n    }\n    Logger.getInstance().warn(\n      `Action/Job Duration has expired ${message.eventId}`,\n    );\n    return BadRequest('Job Duration has expired')(message);\n  };\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,gCAA2B;AAC3B,oBAAuB;AAEvB,MAAM,UAAU,CAAC,YAAyC;AACxD,QAAM,MAAM,oBAAI,KAAK;AACrB,QAAM,aAAa,IAAI,KAAK,QAAQ,GAAG;AACvC,SAAO,MAAM;AACf;AAEO,MAAM,4BAA4B,CACvC,mBACA,qBAGsE;AACtE,SAAO,OAAO,YAAgC;AAC5C,QAAI,CAAC,qBAAqB,QAAQ,SAAS,UAAU;AACnD,aAAO,iBAAiB,OAAO;AAAA,IACjC;AACA,QAAI,QAAQ,OAAO,GAAG;AACpB,aAAO,iBAAiB,OAAO;AAAA,IACjC;AACA,yBAAO,YAAY,EAAE;AAAA,MACnB,mCAAmC,QAAQ,OAAO;AAAA,IACpD;AACA,eAAO,sCAAW,0BAA0B,EAAE,OAAO;AAAA,EACvD;AACF;",
  "names": []
}
