{
  "version": 3,
  "sources": ["../../../../../../../libs/connector-runner-dummy-source/src/lib/kafka-message.factory.ts"],
  "sourcesContent": ["import { BaseConnectorConfig, XodSourceMessageType } from '@xip-online-data/types';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst payloadFactory = (\n  body: any,\n  metadata: any,\n  config: BaseConnectorConfig,\n  eventType: string,\n): XodSourceMessageType => ({\n  type: 'SOURCE',\n  eventId: uuidv4(),\n  eventType,\n  created: Date.now(),\n  ttl: -1,\n  tenantIdentifier: config.tenantIdentifier,\n  payload: {\n    body,\n    metadata,\n  }\n});\n\nexport const buildKafkaMessage = (\n  body: any,\n  metadata: any,\n  config: BaseConnectorConfig,\n  eventType: string,\n  amount: number = 10\n): [ messages: Array<XodSourceMessageType>, topic: string ] => {\n  const kafkaPayload = Array.from(Array(amount).keys()).map(() => payloadFactory(body, metadata, config, eventType));\n  const topic = generateKafkaTopic(config);\n  return [ kafkaPayload, topic ];\n}\n\n\n\nexport function generateKafkaTopic(connectorConfig: BaseConnectorConfig): string {\n  return `${connectorConfig.tenantIdentifier}_SOURCE_${connectorConfig.datasourceIdentifier}`;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,kBAA6B;AAE7B,MAAM,iBAAiB,CACrB,MACA,UACA,QACA,eAC0B;AAAA,EAC1B,MAAM;AAAA,EACN,aAAS,YAAAA,IAAO;AAAA,EAChB;AAAA,EACA,SAAS,KAAK,IAAI;AAAA,EAClB,KAAK;AAAA,EACL,kBAAkB,OAAO;AAAA,EACzB,SAAS;AAAA,IACP;AAAA,IACA;AAAA,EACF;AACF;AAEO,MAAM,oBAAoB,CAC/B,MACA,UACA,QACA,WACA,SAAiB,OAC4C;AAC7D,QAAM,eAAe,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,MAAM,eAAe,MAAM,UAAU,QAAQ,SAAS,CAAC;AACjH,QAAM,QAAQ,mBAAmB,MAAM;AACvC,SAAO,CAAE,cAAc,KAAM;AAC/B;AAIO,SAAS,mBAAmB,iBAA8C;AAC/E,SAAO,GAAG,gBAAgB,gBAAgB,WAAW,gBAAgB,oBAAoB;AAC3F;",
  "names": ["uuidv4"]
}
