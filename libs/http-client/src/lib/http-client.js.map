{
  "version": 3,
  "sources": ["../../../../../../../libs/http-client/src/lib/http-client.ts"],
  "sourcesContent": ["import axios, { AxiosError } from 'axios';\nimport { Logger } from '@transai/logger';\nimport { HttpConfig } from './types';\n\nexport interface HttpResponse {\n  status: number;\n  data: string;\n  success: boolean;\n}\n\nexport class HttpClient {\n  readonly #config: HttpConfig;\n\n  constructor(config: HttpConfig) {\n    this.#config = config;\n  }\n\n  public async init(): Promise<void> {\n    Logger.getInstance().info('Initializing http: ', this.#config.host);\n  }\n\n  public async post(\n    destination: string,\n    content: string,\n  ): Promise<HttpResponse> {\n    try {\n      const url = `${this.#config.host}${destination}`;\n      Logger.getInstance().debug(`POSTing to ${url} with content: ${content}`);\n      const res = await axios.post(url, content, {\n        timeout: this.#config.timeout ?? 5000,\n        headers: {\n          // Overwrite Axios's automatically set Content-Type\n          'Content-Type': this.#config.contentType ?? 'application/json',\n        },\n      });\n\n      Logger.getInstance().debug(\n        `Response from ${url}: ${JSON.stringify(res.data)}`,\n      );\n\n      return {\n        success: res.status >= 200 && res.status < 300,\n        status: res.status,\n        data: JSON.stringify(res.data),\n      };\n    } catch (error) {\n      const err = error as AxiosError;\n      return {\n        success: false,\n        status: err.response?.status ?? 500,\n        data: JSON.stringify(err.response?.data) ?? err.message,\n      };\n    }\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkC;AAClC,oBAAuB;AAShB,MAAM,WAAW;AAAA,EACb;AAAA,EAET,YAAY,QAAoB;AAC9B,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,MAAa,OAAsB;AACjC,yBAAO,YAAY,EAAE,KAAK,uBAAuB,KAAK,QAAQ,IAAI;AAAA,EACpE;AAAA,EAEA,MAAa,KACX,aACA,SACuB;AACvB,QAAI;AACF,YAAM,MAAM,GAAG,KAAK,QAAQ,IAAI,GAAG,WAAW;AAC9C,2BAAO,YAAY,EAAE,MAAM,cAAc,GAAG,kBAAkB,OAAO,EAAE;AACvE,YAAM,MAAM,MAAM,aAAAA,QAAM,KAAK,KAAK,SAAS;AAAA,QACzC,SAAS,KAAK,QAAQ,WAAW;AAAA,QACjC,SAAS;AAAA;AAAA,UAEP,gBAAgB,KAAK,QAAQ,eAAe;AAAA,QAC9C;AAAA,MACF,CAAC;AAED,2BAAO,YAAY,EAAE;AAAA,QACnB,iBAAiB,GAAG,KAAK,KAAK,UAAU,IAAI,IAAI,CAAC;AAAA,MACnD;AAEA,aAAO;AAAA,QACL,SAAS,IAAI,UAAU,OAAO,IAAI,SAAS;AAAA,QAC3C,QAAQ,IAAI;AAAA,QACZ,MAAM,KAAK,UAAU,IAAI,IAAI;AAAA,MAC/B;AAAA,IACF,SAAS,OAAO;AACd,YAAM,MAAM;AACZ,aAAO;AAAA,QACL,SAAS;AAAA,QACT,QAAQ,IAAI,UAAU,UAAU;AAAA,QAChC,MAAM,KAAK,UAAU,IAAI,UAAU,IAAI,KAAK,IAAI;AAAA,MAClD;AAAA,IACF;AAAA,EACF;AACF;",
  "names": ["axios"]
}
