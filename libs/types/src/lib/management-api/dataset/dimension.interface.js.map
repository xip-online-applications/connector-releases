{
  "version": 3,
  "sources": ["../../../../../../../../../libs/types/src/lib/management-api/dataset/dimension.interface.ts"],
  "sourcesContent": ["import { z } from 'zod';\nimport {\n  DimensionFormatsEnum,\n  DimensionTypesEnum,\n  FieldValueType,\n} from '../type-enums';\nimport { SwitchInterface, SwitchSchema } from './switch.interface';\nimport { MetaInterface, MetaSchema } from './meta.interface';\n\nexport const DimensionSchema = z\n  .object({\n    name: z.string().min(1),\n    description: z.string().min(1),\n    type: z.nativeEnum(DimensionTypesEnum),\n    format: z.nativeEnum(DimensionFormatsEnum).optional(),\n    explode: z.boolean().optional(),\n    index: z.union([z.boolean(), z.string()]).optional(),\n    switch: SwitchSchema.optional(),\n    field: FieldValueType.optional(),\n    sql: z.string().min(1).optional(),\n    public: z.boolean().optional(),\n    primaryKey: z.boolean().optional(),\n    subQuery: z.boolean().optional(),\n    meta: MetaSchema.optional(),\n  })\n  .superRefine((val, ctx) => {\n    if (\n      val.switch !== undefined &&\n      (val.field !== undefined || val.sql !== undefined)\n    ) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: 'If switch is chosen, do not provide field or sql.',\n      });\n    } else if (val.switch !== undefined) {\n      return;\n    }\n\n    if (val.field !== undefined && val.sql !== undefined) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: 'If field is chosen, do not provide sql.',\n      });\n    } else if (val.field !== undefined) {\n      return;\n    }\n\n    if (val.sql === undefined) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: 'Please provide switch, field or sql.',\n      });\n    }\n  });\n\nexport interface DimensionInterface {\n  name: string;\n  description: string;\n  type: DimensionTypesEnum;\n  format?: DimensionFormatsEnum;\n  explode?: boolean;\n  index?: boolean | string;\n  switch?: SwitchInterface;\n  field?: string | Array<string>;\n  sql?: string;\n  public?: boolean;\n  primaryKey?: boolean;\n  subQuery?: boolean;\n  meta?: MetaInterface;\n  // DO NOT RENAME. THIS IS ACCORDING TO THE OFFICIAL API\n  granularities?: {\n    [key: string]: {\n      interval: string;\n    };\n  };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAkB;AAClB,wBAIO;AACP,oBAA8C;AAC9C,kBAA0C;AAEnC,MAAM,kBAAkB,aAC5B,OAAO;AAAA,EACN,MAAM,aAAE,OAAO,EAAE,IAAI,CAAC;AAAA,EACtB,aAAa,aAAE,OAAO,EAAE,IAAI,CAAC;AAAA,EAC7B,MAAM,aAAE,WAAW,oCAAkB;AAAA,EACrC,QAAQ,aAAE,WAAW,sCAAoB,EAAE,SAAS;AAAA,EACpD,SAAS,aAAE,QAAQ,EAAE,SAAS;AAAA,EAC9B,OAAO,aAAE,MAAM,CAAC,aAAE,QAAQ,GAAG,aAAE,OAAO,CAAC,CAAC,EAAE,SAAS;AAAA,EACnD,QAAQ,2BAAa,SAAS;AAAA,EAC9B,OAAO,iCAAe,SAAS;AAAA,EAC/B,KAAK,aAAE,OAAO,EAAE,IAAI,CAAC,EAAE,SAAS;AAAA,EAChC,QAAQ,aAAE,QAAQ,EAAE,SAAS;AAAA,EAC7B,YAAY,aAAE,QAAQ,EAAE,SAAS;AAAA,EACjC,UAAU,aAAE,QAAQ,EAAE,SAAS;AAAA,EAC/B,MAAM,uBAAW,SAAS;AAC5B,CAAC,EACA,YAAY,CAAC,KAAK,QAAQ;AACzB,MACE,IAAI,WAAW,WACd,IAAI,UAAU,UAAa,IAAI,QAAQ,SACxC;AACA,QAAI,SAAS;AAAA,MACX,MAAM,aAAE,aAAa;AAAA,MACrB,SAAS;AAAA,IACX,CAAC;AAAA,EACH,WAAW,IAAI,WAAW,QAAW;AACnC;AAAA,EACF;AAEA,MAAI,IAAI,UAAU,UAAa,IAAI,QAAQ,QAAW;AACpD,QAAI,SAAS;AAAA,MACX,MAAM,aAAE,aAAa;AAAA,MACrB,SAAS;AAAA,IACX,CAAC;AAAA,EACH,WAAW,IAAI,UAAU,QAAW;AAClC;AAAA,EACF;AAEA,MAAI,IAAI,QAAQ,QAAW;AACzB,QAAI,SAAS;AAAA,MACX,MAAM,aAAE,aAAa;AAAA,MACrB,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AACF,CAAC;",
  "names": []
}
