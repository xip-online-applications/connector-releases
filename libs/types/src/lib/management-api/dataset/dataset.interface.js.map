{
  "version": 3,
  "sources": ["../../../../../../../../../libs/types/src/lib/management-api/dataset/dataset.interface.ts"],
  "sourcesContent": ["import { z } from 'zod';\nimport { DatasetTypeEnum } from '../type-enums';\nimport { CollectionInterface, CollectionSchema } from './collection.interface';\nimport { DimensionsInterface, DimensionsSchema } from './dimensions.interface';\nimport { SegmentsInterface, SegmentsSchema } from './segments.interface';\nimport { RelationsInterface, RelationsSchema } from './relations.interface';\nimport { MeasuresInterface, MeasuresSchema } from './measures.interface';\nimport { MetaInterface, MetaSchema } from './meta.interface';\nimport {\n  PreAggregationsInterface,\n  PreAggregationsSchema,\n} from './pre-aggregations.interface';\n\nexport const DatasetSchema = z\n  .object({\n    name: z.string().min(1),\n    description: z.string().min(1),\n    type: z.nativeEnum(DatasetTypeEnum),\n    prefix: z.string().min(1),\n    parent: z.string().min(1).optional(),\n    sql: z.string().min(1).optional(),\n    meta: MetaSchema.optional(),\n    collection: CollectionSchema.optional(),\n    dimensions: DimensionsSchema.optional(),\n    segments: SegmentsSchema.optional(),\n    relations: RelationsSchema.optional(),\n    measures: MeasuresSchema.optional(),\n    preAggregations: PreAggregationsSchema.optional(),\n  })\n  .superRefine((val, ctx) => {\n    if (!val.parent && val.sql === undefined && val.collection === undefined) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: 'You need to define either sql or collection.',\n      });\n\n      return;\n    }\n\n    if (val.sql !== undefined && val.collection !== undefined) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: 'You need to define either sql or collection.',\n      });\n    }\n  });\n\nexport interface DatasetInterface {\n  name: string;\n  description: string;\n  type: DatasetTypeEnum;\n  prefix: string;\n  parent?: string;\n  sql?: string;\n  refreshSql?: string;\n  meta?: MetaInterface;\n  collection?: CollectionInterface;\n  dimensions?: DimensionsInterface;\n  segments?: SegmentsInterface;\n  relations?: RelationsInterface;\n  measures?: MeasuresInterface;\n  preAggregations?: PreAggregationsInterface;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAkB;AAClB,wBAAgC;AAChC,wBAAsD;AACtD,wBAAsD;AACtD,sBAAkD;AAClD,uBAAoD;AACpD,sBAAkD;AAClD,kBAA0C;AAC1C,8BAGO;AAEA,MAAM,gBAAgB,aAC1B,OAAO;AAAA,EACN,MAAM,aAAE,OAAO,EAAE,IAAI,CAAC;AAAA,EACtB,aAAa,aAAE,OAAO,EAAE,IAAI,CAAC;AAAA,EAC7B,MAAM,aAAE,WAAW,iCAAe;AAAA,EAClC,QAAQ,aAAE,OAAO,EAAE,IAAI,CAAC;AAAA,EACxB,QAAQ,aAAE,OAAO,EAAE,IAAI,CAAC,EAAE,SAAS;AAAA,EACnC,KAAK,aAAE,OAAO,EAAE,IAAI,CAAC,EAAE,SAAS;AAAA,EAChC,MAAM,uBAAW,SAAS;AAAA,EAC1B,YAAY,mCAAiB,SAAS;AAAA,EACtC,YAAY,mCAAiB,SAAS;AAAA,EACtC,UAAU,+BAAe,SAAS;AAAA,EAClC,WAAW,iCAAgB,SAAS;AAAA,EACpC,UAAU,+BAAe,SAAS;AAAA,EAClC,iBAAiB,8CAAsB,SAAS;AAClD,CAAC,EACA,YAAY,CAAC,KAAK,QAAQ;AACzB,MAAI,CAAC,IAAI,UAAU,IAAI,QAAQ,UAAa,IAAI,eAAe,QAAW;AACxE,QAAI,SAAS;AAAA,MACX,MAAM,aAAE,aAAa;AAAA,MACrB,SAAS;AAAA,IACX,CAAC;AAED;AAAA,EACF;AAEA,MAAI,IAAI,QAAQ,UAAa,IAAI,eAAe,QAAW;AACzD,QAAI,SAAS;AAAA,MACX,MAAM,aAAE,aAAa;AAAA,MACrB,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AACF,CAAC;",
  "names": []
}
