{
  "version": 3,
  "sources": ["../../../../../../../../libs/httpclient/src/lib/cache/redis-cache.service.ts"],
  "sourcesContent": ["import { createClient, RedisClientType } from 'redis';\nimport { CacheServiceInterface } from './cache-service.interface';\n\nexport interface OptionsInterface {\n  cacheKeyPrefix?: string;\n}\n\nexport class RedisCacheService implements CacheServiceInterface {\n  #redisClient: RedisClientType;\n\n  #options: OptionsInterface;\n\n  constructor(\n    redisClient: RedisClientType | string,\n    options: OptionsInterface = {},\n  ) {\n    if (typeof redisClient === 'string') {\n      redisClient = createClient({ url: redisClient });\n      redisClient.connect();\n    }\n\n    this.#redisClient = redisClient;\n    this.#options = options;\n  }\n\n  public async get<T>(key: string): Promise<T | undefined> {\n    const value = await this.#redisClient.get(this.getKey(key));\n\n    return value ? JSON.parse(value) : undefined;\n  }\n\n  public async set<T>(key: string, value: T): Promise<void> {\n    await this.#redisClient.set(this.getKey(key), JSON.stringify(value));\n  }\n\n  public async clear(): Promise<void> {\n    await this.#redisClient.flushDb();\n  }\n\n  private getKey(key: string): string {\n    return `${this.#options.cacheKeyPrefix ? `${this.#options.cacheKeyPrefix}_` : ''}${key}`;\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA8C;AAOvC,MAAM,kBAAmD;AAAA,EAC9D;AAAA,EAEA;AAAA,EAEA,YACE,aACA,UAA4B,CAAC,GAC7B;AACA,QAAI,OAAO,gBAAgB,UAAU;AACnC,wBAAc,2BAAa,EAAE,KAAK,YAAY,CAAC;AAC/C,kBAAY,QAAQ;AAAA,IACtB;AAEA,SAAK,eAAe;AACpB,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,MAAa,IAAO,KAAqC;AACvD,UAAM,QAAQ,MAAM,KAAK,aAAa,IAAI,KAAK,OAAO,GAAG,CAAC;AAE1D,WAAO,QAAQ,KAAK,MAAM,KAAK,IAAI;AAAA,EACrC;AAAA,EAEA,MAAa,IAAO,KAAa,OAAyB;AACxD,UAAM,KAAK,aAAa,IAAI,KAAK,OAAO,GAAG,GAAG,KAAK,UAAU,KAAK,CAAC;AAAA,EACrE;AAAA,EAEA,MAAa,QAAuB;AAClC,UAAM,KAAK,aAAa,QAAQ;AAAA,EAClC;AAAA,EAEQ,OAAO,KAAqB;AAClC,WAAO,GAAG,KAAK,SAAS,iBAAiB,GAAG,KAAK,SAAS,cAAc,MAAM,EAAE,GAAG,GAAG;AAAA,EACxF;AACF;",
  "names": []
}
